# ì›Œí¬í”Œë¡œìš° ì´ë¦„ ì„¤ì •
name:
  TrelloProject CI/CD
  # ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì‹œ íŠ¸ë¦¬ê±°í•œ ì‚¬ìš©ìì˜ ì´ë¦„ í‘œì‹œ
run-name: ${{ github.actor }} is testing out GitHub Actions ğŸš€
# ì´ ì›Œí¬í”Œë¡œìš°ê°€ ì–´ë–¤ ì´ë²¤íŠ¸ì—ì„œ ì‹¤í–‰ë  ì§€ ì •ì˜, ì—¬ê¸°ì„œëŠ” push(ì»¤ë°‹) ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰
on: [push]
jobs:
  TrelloProject-CI: # ì¡ ì´ë¦„
    runs-on: ubuntu-latest # ì´ ì¡ì´ ìµœì‹  Ubuntu í™˜ê²½ì—ì„œ ì‹¤í–‰ë¨ì„ ì§€ì •, runs-on ê°’ì„ ë³€ê²½í•˜ì—¬ ë‹¤ë¥¸ OS(ì˜ˆ: windows-latest, macos-latest)ì—ì„œ ì‹¤í–‰í•  ìˆ˜ë„ ìˆë‹¤
    steps:
      # í˜„ì¬ ì›Œí¬í”Œë¡œìš°ê°€ ì–´ë–¤ ì´ë²¤íŠ¸(push, pull request ë“±)ì— ì˜í•´ íŠ¸ë¦¬ê±°ë˜ì—ˆëŠ”ì§€ ì¶œë ¥
      - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
      # í˜„ì¬ jopì´ ì‹¤í–‰ë˜ê³  ìˆëŠ” ìš´ì˜ì²´ì œ(ubuntu) ì¶œë ¥
      - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      # í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ë¸Œëœì¹˜ì™€ ë¦¬í¬ì§€í† ë¦¬ ì´ë¦„ ì¶œë ¥
      - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      # GitHubì˜ ê³µì‹ ì•¡ì…˜ actions/checkoutì„ ì‚¬ìš©í•˜ì—¬ í˜„ì¬ ë¦¬í¬ì§€í† ë¦¬ ì½”ë“œë¥¼ ëŸ¬ë„ˆ í™˜ê²½ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
      - name: Check out repository code
        uses: actions/checkout@v4
      # ì½”ë“œê°€ í´ë¡ ë˜ì—ˆìŒì„ í™•ì¸í•˜ëŠ” ë©”ì‹œì§€ ì¶œë ¥
      - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."

        # Node.js í™˜ê²½ ì„¤ì •
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '22.12.0' # ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” Node ë²„ì „

      # ì˜ì¡´ì„± ì„¤ì¹˜
      - name: Install Dependencies
        run: npm ci

      # ë¦°íŠ¸ ê²€ì‚¬ ì‹¤í–‰
      # - name: Run Lint
      #   run: npm run lint

      # í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (CI í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ëŠ” í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´)
      - name: Run Tests
        run: npm run test:ci

      - name: List files in the repository
        # ì§€ì •ëœ ë””ë ‰í† ë¦¬ì˜ íŒŒì¼, í´ë” ë‚˜ì—´ >> ì‹œê°ì  í™•ì¸ ê°€ëŠ¥
        run: |
          ls ${{ github.workspace }}
      # í˜„ì¬ ì¡ ìƒíƒœ ì¶œë ¥ >> ì •ìƒì ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
      - run: echo "ğŸ This job's status is ${{ job.status }}."
  TrelloProject-CD:
    needs: ci # CI jobì´ ì„±ê³µí•œ í›„ ì‹¤í–‰ë¨
    runs-on: ubuntu-latest
    environment:
      name: production # GitHub Environmentsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
      url: ${{ steps.deploy.outputs.deployment_url }} # ë°°í¬ í›„ URL ë“±
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '22.12.0'
